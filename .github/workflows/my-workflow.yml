name: "JS Actions"

on: [push, pull_request]

jobs:
  before-work:
    runs-on: "ubuntu-latest"
    outputs:
      must-skip: ${{ steps.skip-check.outputs.must-skip }}
    steps:
      - uses: actions/checkout@v1
        with: bobismijnnaam/skip-push-on-pr
      - id: skip-check
        uses: ./skip-push-on-pr/main.js
        with:
          first-greeting: "Learning Lab User"
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  work:
    needs: before-work
    if: ${{ needs.before-work.outputs.must-skip != 'true' }}

    runs-on: "ubuntu-latest"
    steps:
      - name: "important work"
        run: 'echo "veeeeery important"'
